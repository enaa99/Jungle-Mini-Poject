<!DOCTYPE html>
<html lang="ko">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Import Jquery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2.9.1/dist/umd/popper.min.js" charset="utf-8"></script>

  <script>
    function cancelParty(object_id) {
      $.ajax({
        type: "POST",
        url: "/party/cancel",
        data: {
          cardid_give: object_id,
        },
        success: function (response) {
          if (response["result"] == "success") {
            alert('취소 완료');
          } else {
            alert(response["result"]);
          }
          window.location.href = '/home';
        }
      });
    }


    function modifyInfo() {
      $.ajax({
        type: "GET",
        url: "/auth/modify",
        data: {
        },
        success: function (response) {
          if (response["result"] == "success") {

            window.location.href = '/info';
          }
          else
            window.location.href = '/';
        }
      })
    }


    function joinParty(object_id) {
      $.ajax({
        type: "POST",
        url: "/party/join",
        data: {
          cardid_give: object_id,
        },
        success: function (response) {
          if (response["result"] == "success") {
            alert('참여 완료');

          } else {
            alert(response["result"]);
          }
          window.location.href = '/home';
        }
      });
    }

    function confirmParty(object_id) {
      $.ajax({
        type: "PATCH",
        url: "/party",
        data: {
          object_id_give: object_id,
        },
        success: function (response) {
          if (response["result"] == "success") {
            alert('확정 완료');
          }
          else {
            alert(response["result"]);
          }

          window.location.href = '/home';
        }
      });
    }

    function deleteParty(object_id) {
      $.ajax({
        type: "DELETE",
        url: "/party",
        data: {
          object_id_give: object_id,
        },
        success: function (response) {
          if (response["result"] == "success") {
            alert('모임이 삭제되었습니다.');
          }
          else {
            alert(response['result']);
          }

          window.location.href = '/home';
        }
      });
    }

    function createParty() {

      let title = $('#party-title').val();
      let category = $('#party-category').val();
      let menu = $('#party-menu').val();
      let store = $('#party-store').val();
      let time = $('#party-time').val();
      let people = $('#party-people').val();
      let place = $('#party-place').val();

      $.ajax({
        type: "POST",
        url: "/party",
        data: {
          title_give: title,
          category_give: category,
          menu_give: menu,
          store_give: store,
          time_give: time,
          people_give: people,
          place_give: place
        },
        success: function (response) {
          if (response["result"] == "success") {
            alert('새로운 모임 생성 완료');

          } else {
            alert(response["result"]);
          }
          window.location.href = '/home';
        }
      });
    }

    function toggleModal(modalID) {
      document.getElementById(modalID).classList.toggle("hidden");
      document.getElementById(modalID + "-backdrop").classList.toggle("hidden");
      document.getElementById(modalID).classList.toggle("flex");
      document.getElementById(modalID + "-backdrop").classList.toggle("flex");
    }
    function openPopover(event, popoverID) {
      let element = event.target;
      while (element.nodeName !== "BUTTON") {
        element = element.parentNode;
      }
      var popper = Popper.createPopper(element, document.getElementById(popoverID), {
        placement: 'right'
      });
      document.getElementById(popoverID).classList.toggle("hidden");
    }
  </script>
  <title>Krafton Jungle Team06</title>

  <!-- Style -->
  <style type="text/css">
    * {
      font-family: "Stylish", sans-serif;
    }

    .wrap {
      width: 900px;
      margin: auto;
    }

    .comment {
      color: blue;
      font-weight: bold;
    }

    .link-like {
      color: #397af6;
    }
  </style>
  <script>
    // 로그 아웃
    function signOut() {
      $.removeCookie('mytoken', { path: '/' });
      window.location.href = '/';
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
  <!-- component -->
  <!-- This is an example component -->
  <div>
    <nav class="bg-white border-b border-gray-200 fixed z-30 w-full">
      <div class="px-3 py-3 lg:px-5 lg:pl-3">
        <div class="flex items-center justify-between">
          <div class="flex items-center justify-start">
            <button id="toggleSidebarMobile" aria-expanded="true" aria-controls="sidebar"
              class="lg:hidden mr-2 text-gray-600 hover:text-gray-900 cursor-pointer p-2 hover:bg-gray-100 focus:bg-gray-100 focus:ring-2 focus:ring-gray-100 rounded">
              <svg id="toggleSidebarMobileHamburger" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                  d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                  clip-rule="evenodd"></path>
              </svg>
              <svg id="toggleSidebarMobileClose" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                  d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                  clip-rule="evenodd"></path>
              </svg>
            </button>
            <a href="/" class="text-2xl text-gray-700 font-bold flex items-center lg:ml-2.5">
              <span class="self-center whitespace-nowrap">오늘 밥 친구</span>
              <svg class="w-8 h-8 ml-2 mb-1 stroke-gray-700" fill="none" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </a>
          </div>
          <div class="flex items-center">
            <div class="pr-4">
              <button onclick="signOut()"
                class="bg-transparent text-black-700 font-semibold py-2 px-4 border border-black-500 hover:border-transparent rounded">
                로그아웃
              </button>
            </div>
            <a href="#">
              <svg class="w-10 h-10 stroke-gray-700" fill="none" viewBox="0 0 24 24" onclick="modifyInfo()"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z">
                </path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </nav>
    <!-- sidebar -->
    <div class="flex overflow-hidden bg-white pt-16">
      <aside id="sidebar"
        class="fixed hidden z-20 h-full top-0 left-0 pt-16 flex lg:flex flex-shrink-0 flex-col w-1/6 transition-width duration-75"
        aria-label="Sidebar">
        <div class="relative flex-1 flex flex-col min-h-0 border-r border-gray-200 bg-white pt-0">
          <div class="flex-1 flex flex-col pt-3 pb-4 overflow-y-auto">
            <div class="flex-1 px-3 bg-white divide-y space-y-1">
              <!-- host sidebar -->
              <div class="basis-1/2 my-8">
                <div class="flex justify-center">
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.701 2.701 0 00-1.5-.454M9 6v2m3-2v2m3-2v2M9 3h.01M12 3h.01M15 3h.01M21 21v-7a2 2 0 00-2-2H5a2 2 0 00-2 2v7h18zm-3-9v-2a2 2 0 00-2-2H8a2 2 0 00-2 2v2h12z">
                    </path>
                  </svg>
                  <p class="text-2xl font-bold ml-2"> 내가 만든 모임</p>
                </div>
                {% for host in host_party %}
                {% if host.state == '0' %}
                <div class="my-4 bg-green-100 rounded overflow-hidden shadow-lg">
                  {% else %}
                  <div class="my-4 bg-red-100 rounded overflow-hidden shadow-lg">
                    {% endif %}
                    <div class="px-6 py-4 ">
                      <div class="flex justify-between">
                        <p class="font-bold text-xl mb-2 truncate ...">{{host.title}}</p>
                        <div class="flex flex-wrap">
                          <div class="w-full text-center">

                          </div>
                        </div>
                      </div>
                      <p class="truncate ..."> 메뉴 : {{host.menu}} </p>
                      <p class="truncate ..."> 식당 : {{host.store}} </p>
                      <p class="truncate ..."> 약속 시간 : {{host.time}}</p>
                      <p class="truncate ..."> 약속 장소 : {{host.place}}</p>
                      </p>
                      <div class="flex justify-between inline-block gap-2">
                        {% if host.state == '0' %}
                        <button onclick="confirmParty('{{host._id}}')"
                          class="bg-blue-500 hover:bg-blue-700 text-white text-xs font-bold mt-4 py-2 px-3 rounded">
                          확정
                        </button>
                        {% else %}
                        <button onclick="toggleModal('host-modal')"
                          class="bg-blue-500 hover:bg-blue-700 text-white text-xs font-bold mt-4 py-2 px-3 rounded">
                          참여자
                        </button>
                        <!-- Data Modal -->
                        <div
                          class="hidden overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center"
                          id="host-modal">
                          <div class="relative w-auto my-6 mx-auto max-w-sm">
                            <!--content-->
                            <div
                              class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none">
                              <!--header-->
                              <div class="flex items-start p-5 border-b border-solid border-slate-200 rounded-t">
                                <h3 class="text-2xl font-semibold">
                                  모임 참여자 정보
                                </h3>
                              </div>
                              <div class="flex justify-center pt-5">
                                <span> 🎉 모임이 결성되었습니다! </span>
                              </div>
                              <h3 class="flex justify-center p-5 text-sm font-semibold">
                                Slack에 이메일 주소를 입력해서 추가 대화를 진행해주세요!
                              </h3>
                              <hr class="h-px mx-4 bg-gray-200 border-0">
                              <!--body-->
                              <div class="relative p-6 flex-auto">
                                {% for user in host.participant %}
                                <div class="py-1">
                                  <div class="flex justify-center bg-slate-700 rounded-md p-6">
                                    <div class="overflow-hidden mr-2 mt-4 relative w-10 h-10 bg-gray-100 rounded-full">
                                      <svg class="absolute -left-1 w-12 h-12 text-gray-400" fill="currentColor"
                                        viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd"
                                          d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd">
                                        </path>
                                      </svg>
                                    </div>
                                    <ul class="my-2 text-white">
                                      <li>닉네임 : {{ user['name'] }}</li>
                                      <li>이메일 : {{ user['email'] }}@gmail.com</li>
                                      <li>반 : {{ user['class'] }}</li>
                                    </ul>
                                  </div>
                                </div>
                                {% endfor %}
                              </div>
                              <!--footer-->
                              <div
                                class="flex justify-center justify-end p-6 border-t border-solid border-slate-200 rounded-b">
                                <button type="button"
                                  class="text-gray-900 bg-white hover:bg-gray-100 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2 mb-2"
                                  onclick="window.open('https://slack.com')">
                                  <svg enable-background="new 0 0 2447.6 2452.5" class="mr-2 -ml-1 w-6 h-6"
                                    viewBox="0 0 2447.6 2452.5" xmlns="http://www.w3.org/2000/svg">
                                    <g clip-rule="evenodd" fill-rule="evenodd">
                                      <path
                                        d="m897.4 0c-135.3.1-244.8 109.9-244.7 245.2-.1 135.3 109.5 245.1 244.8 245.2h244.8v-245.1c.1-135.3-109.5-245.1-244.9-245.3.1 0 .1 0 0 0m0 654h-652.6c-135.3.1-244.9 109.9-244.8 245.2-.2 135.3 109.4 245.1 244.7 245.3h652.7c135.3-.1 244.9-109.9 244.8-245.2.1-135.4-109.5-245.2-244.8-245.3z"
                                        fill="#36c5f0" />
                                      <path
                                        d="m2447.6 899.2c.1-135.3-109.5-245.1-244.8-245.2-135.3.1-244.9 109.9-244.8 245.2v245.3h244.8c135.3-.1 244.9-109.9 244.8-245.3zm-652.7 0v-654c.1-135.2-109.4-245-244.7-245.2-135.3.1-244.9 109.9-244.8 245.2v654c-.2 135.3 109.4 245.1 244.7 245.3 135.3-.1 244.9-109.9 244.8-245.3z"
                                        fill="#2eb67d" />
                                      <path
                                        d="m1550.1 2452.5c135.3-.1 244.9-109.9 244.8-245.2.1-135.3-109.5-245.1-244.8-245.2h-244.8v245.2c-.1 135.2 109.5 245 244.8 245.2zm0-654.1h652.7c135.3-.1 244.9-109.9 244.8-245.2.2-135.3-109.4-245.1-244.7-245.3h-652.7c-135.3.1-244.9 109.9-244.8 245.2-.1 135.4 109.4 245.2 244.7 245.3z"
                                        fill="#ecb22e" />
                                      <path
                                        d="m0 1553.2c-.1 135.3 109.5 245.1 244.8 245.2 135.3-.1 244.9-109.9 244.8-245.2v-245.2h-244.8c-135.3.1-244.9 109.9-244.8 245.2zm652.7 0v654c-.2 135.3 109.4 245.1 244.7 245.3 135.3-.1 244.9-109.9 244.8-245.2v-653.9c.2-135.3-109.4-245.1-244.7-245.3-135.4 0-244.9 109.8-244.8 245.1 0 0 0 .1 0 0"
                                        fill="#e01e5a" />
                                    </g>
                                  </svg>
                                  Connect with Slack
                                </button>
                                <button
                                  class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                                  type="button" onclick="toggleModal('host-modal')">
                                  Close
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="hidden opacity-25 fixed inset-0 z-40 bg-black" id="host-modal-backdrop"></div>
                        {% endif %}
                        <button onclick="deleteParty('{{host._id}}')"
                          class="bg-red-500 hover:bg-red-700 text-white text-xs font-bold mt-4 py-2 px-3 rounded">
                          삭제
                        </button>
                        <button
                          class="bg-slate-500 text-white active:bg-slate-600 m-2 px-2 py-2 rounded-full shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-50"
                          type="button" onclick="openPopover(event,'popover-id')">
                          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
                          </svg>
                        </button>
                        <div
                          class="hidden bg-black opacity-80 border-0 block z-50 font-normal leading-normal text-sm max-w-xs text-left no-underline break-words rounded-lg"
                          id="popover-id">
                          <div>
                            <div
                              class="bg-black text-white opacity-80 font-semibold p-3 mb-0 border-b border-solid border-slate-100 uppercase rounded-t-lg">
                              현재 참여자 현황 ( {{host['participant']|length}} / {{host.people}} )
                            </div>
                            <div class="text-white p-3">
                              {% for user in host.participant %}
                              <div class="flex justify-start"><svg class="w-5 h-5 pr-2" fill="none"
                                  stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
                                  </path>
                                </svg>
                                <p class="truncate ...">{{user['name']}}</p>
                              </div>
                              {% endfor %}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
                <!-- participant sidebar -->
                <div class="basis-1/2">
                  <div class="mt-8 mb-4 flex justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7">
                      </path>
                    </svg>
                    <p class="text-2xl font-bold ml-2"> 참여 대기중인 모임</p>
                  </div>
                  {% for participant in participant_party %}
                  {% if participant.state == '0' %}
                  <div class="my-4 bg-green-100 rounded overflow-hidden shadow-lg">
                    {% else %}
                    <div class="my-4 bg-red-100 rounded overflow-hidden shadow-lg">
                      {% endif %}
                      <div class="px-6 py-4 ">
                        <div class="flex justify-between">
                          <p class="font-bold text-xl mb-2 truncate ...">{{participant.title}}</p>
                          <div class="flex flex-wrap">
                            <div class="w-full text-center">
                            </div>
                          </div>
                        </div>
                        <p class="truncate ..."> 메뉴 : {{participant.menu}} </p>
                        <p class="truncate ..."> 식당 : {{participant.store}} </p>
                        <p class="truncate ..."> 약속 시간 : {{participant.time}}</p>
                        <p class="truncate ..."> 약속 장소 : {{participant.place}}</p>

                        </p>
                        <div class="flex justify-between inline-block">
                          {% if participant.state == '1' %}
                          <button onclick="toggleModal('participant-modal')"
                            class="bg-blue-500 hover:bg-blue-700 text-white text-xs font-bold mt-4 py-2 px-3 rounded">
                            참여자
                          </button>
                          <!-- Data Modal -->
                          <div
                            class="hidden overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center"
                            id="participant-modal">
                            <div class="relative w-auto my-6 mx-auto max-w-sm">
                              <!--content-->
                              <div
                                class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none">
                                <!--header-->
                                <div class="flex items-start p-5 border-b border-solid border-slate-200 rounded-t">
                                  <h3 class="text-2xl font-semibold">
                                    모임 참여자 정보
                                  </h3>
                                </div>
                                <div class="flex justify-center pt-5">
                                  <span> 🎉 모임이 결성되었습니다! </span>
                                </div>
                                <h3 class="flex justify-center p-5 text-sm font-semibold">
                                  Slack에 이메일 주소를 입력해서 추가 대화를 진행해주세요!
                                </h3>
                                <hr class="h-px mx-4 bg-gray-200 border-0">
                                <!--body-->
                                <div class="relative p-6 flex-auto">
                                  {% for user in participant.participant %}
                                  <div class="py-1">
                                    <div class="flex justify-center bg-slate-700 rounded-md p-6">
                                      <div
                                        class="overflow-hidden mr-2 mt-4 relative w-10 h-10 bg-gray-100 rounded-full">
                                        <svg class="absolute -left-1 w-12 h-12 text-gray-400" fill="currentColor"
                                          viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                          <path fill-rule="evenodd"
                                            d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd">
                                          </path>
                                        </svg>
                                      </div>
                                      <ul class="my-2 text-white">
                                        <li>닉네임 : {{ user['name'] }}</li>
                                        <li>이메일 : {{ user['email'] }}@gmail.com</li>
                                        <li>반 : {{ user['class'] }}</li>
                                      </ul>
                                    </div>
                                  </div>
                                  {% endfor %}
                                </div>
                                <!--footer-->
                                <div
                                  class="flex justify-center justify-end p-6 border-t border-solid border-slate-200 rounded-b">
                                  <button type="button"
                                    class="text-gray-900 bg-white hover:bg-gray-100 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2 mb-2"
                                    onclick="window.open('https://slack.com')">
                                    <svg enable-background="new 0 0 2447.6 2452.5" class="mr-2 -ml-1 w-6 h-6"
                                      viewBox="0 0 2447.6 2452.5" xmlns="http://www.w3.org/2000/svg">
                                      <g clip-rule="evenodd" fill-rule="evenodd">
                                        <path
                                          d="m897.4 0c-135.3.1-244.8 109.9-244.7 245.2-.1 135.3 109.5 245.1 244.8 245.2h244.8v-245.1c.1-135.3-109.5-245.1-244.9-245.3.1 0 .1 0 0 0m0 654h-652.6c-135.3.1-244.9 109.9-244.8 245.2-.2 135.3 109.4 245.1 244.7 245.3h652.7c135.3-.1 244.9-109.9 244.8-245.2.1-135.4-109.5-245.2-244.8-245.3z"
                                          fill="#36c5f0" />
                                        <path
                                          d="m2447.6 899.2c.1-135.3-109.5-245.1-244.8-245.2-135.3.1-244.9 109.9-244.8 245.2v245.3h244.8c135.3-.1 244.9-109.9 244.8-245.3zm-652.7 0v-654c.1-135.2-109.4-245-244.7-245.2-135.3.1-244.9 109.9-244.8 245.2v654c-.2 135.3 109.4 245.1 244.7 245.3 135.3-.1 244.9-109.9 244.8-245.3z"
                                          fill="#2eb67d" />
                                        <path
                                          d="m1550.1 2452.5c135.3-.1 244.9-109.9 244.8-245.2.1-135.3-109.5-245.1-244.8-245.2h-244.8v245.2c-.1 135.2 109.5 245 244.8 245.2zm0-654.1h652.7c135.3-.1 244.9-109.9 244.8-245.2.2-135.3-109.4-245.1-244.7-245.3h-652.7c-135.3.1-244.9 109.9-244.8 245.2-.1 135.4 109.4 245.2 244.7 245.3z"
                                          fill="#ecb22e" />
                                        <path
                                          d="m0 1553.2c-.1 135.3 109.5 245.1 244.8 245.2 135.3-.1 244.9-109.9 244.8-245.2v-245.2h-244.8c-135.3.1-244.9 109.9-244.8 245.2zm652.7 0v654c-.2 135.3 109.4 245.1 244.7 245.3 135.3-.1 244.9-109.9 244.8-245.2v-653.9c.2-135.3-109.4-245.1-244.7-245.3-135.4 0-244.9 109.8-244.8 245.1 0 0 0 .1 0 0"
                                          fill="#e01e5a" />
                                      </g>
                                    </svg>
                                    Connect with Slack
                                  </button>
                                  <button
                                    class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                                    type="button" onclick="toggleModal('participant-modal')">
                                    Close
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="hidden opacity-25 fixed inset-0 z-40 bg-black" id="participant-modal-backdrop">
                          </div>
                          {% else %}
                          <button onclick="cancelParty('{{participant._id}}')"
                            class="bg-red-500 hover:bg-red-700 text-white text-xs font-bold mt-4 py-2 px-3 rounded">
                            취소
                          </button>
                          {% endif %}
                          <button
                            class="bg-slate-500 text-white active:bg-slate-600 m-2 px-2 py-1 rounded-full shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-50"
                            type="button" onclick="openPopover(event,'popover-id2')">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                              xmlns="http://www.w3.org/2000/svg">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
                            </svg>
                          </button>
                          <div
                            class="hidden bg-black opacity-80 border-0 block z-50 font-normal leading-normal text-sm max-w-xs text-left no-underline break-words rounded-lg"
                            id="popover-id2">
                            <div>
                              <div
                                class="bg-black text-white opacity-80 font-semibold p-3 mb-0 border-b border-solid border-slate-100 uppercase rounded-t-lg">
                                현재 참여자 현황 ( {{participant['participant']|length}} / {{participant.people}} )
                              </div>
                              <div class="text-white p-3">
                                {% for user in participant.participant %}
                                <div class="flex justify-start"><svg class="w-5 h-5 pr-2" fill="none"
                                    stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
                                    </path>
                                  </svg>
                                  <p class="truncate ...">{{user['name']}}</p>
                                </div>
                                {% endfor %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    {% endfor %}

                  </div>
                </div>
              </div>
              <div></div>
            </div>
      </aside>
    </div>
    <div class="bg-gray-900 opacity-50 hidden fixed inset-0 z-10" id="sidebarBackdrop"></div>
    <main>
      <div id="main-content" class="h-full w-5/6 bg-gray-50 relative overflow-y-auto lg:ml-64">
        <div class="w-5/6 py-4 px-4">
          <div class="flex justify-center">
            <h2 class="pt-20 text-4xl font-bold">현재 모집중인 모임 목록</h2>
          </div>
          <div class="flex justify-end">
            <button
              class="flex justify-center bg-lime-500 text-white active:bg-lime-600 font-bold text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
              type="button" onclick="toggleModal('create-modal')">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg> <a class="pt-1 pl-2"> 새로운 모임 생성하기 </a>
            </button>
            <div
              class="hidden overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center"
              id="create-modal">
              <div class="relative w-auto my-6 mx-auto max-w-3xl">
                <!--content-->
                <div
                  class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none">
                  <!--header-->
                  <div class="flex items-start justify-between p-4 border-b border-solid border-slate-200 rounded-t">
                    <h3 class="text-xl font-semibold">
                      새로운 모임 생성하기
                    </h3>
                    <button
                      class="p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none"
                      onclick="toggleModal('create-modal')">
                      <span
                        class="bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none">
                        ×
                      </span>
                    </button>
                  </div>
                  <!--body-->
                  <form class="p-4 w-full max-w-lg">
                    <div class="flex flex-wrap -mx-3 mb-6">
                      <div class="w-full px-3">
                        <label class="block uppercase tracking-wide text-gray-700 text-s font-bold mb-2"
                          for="party-title">
                          모임 이름
                        </label>
                        <input
                          class="appearance-none block w-full  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                          id="party-title" type="text">
                      </div>
                    </div>
                    <label class="block tracking-wide text-gray-700 text-s font-bold pl-1 mb-2">
                      메뉴
                    </label>
                    <div class="flex flex-wrap -mx-3 mb-6">
                      <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
                          for="party-category">
                          카테고리
                        </label>
                        <div class="relative">
                          <select
                            class="block appearance-none w-full  border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                            id="party-category">
                            <option>한식</option>
                            <option>중식</option>
                            <option>일식</option>
                            <option>양식</option>
                          </select>
                          <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                              <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                            </svg>
                          </div>
                        </div>
                      </div>
                      <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
                          for="party-menu">
                          메뉴명
                        </label>
                        <input
                          class="appearance-none block w-full  text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"
                          id="party-menu" type="text">
                      </div>
                    </div>
                    <div class="flex flex-wrap -mx-3 mb-6">
                      <div class="w-full px-3">
                        <label class="block uppercase tracking-wide text-gray-700 text-s font-bold mb-2"
                          for="party-store">
                          식당 이름
                        </label>
                        <input
                          class="appearance-none block w-full  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                          id="party-store" type="text">
                      </div>
                    </div>
                    <div class="flex flex-wrap -mx-3 mb-6">
                      <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                        <label class="block tracking-wide text-gray-700 text-s font-bold mb-2" for="party-time">
                          시간
                        </label>
                        <div class="relative">
                          <input
                            class="block appearance-none w-full  border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                            id="party-time" type="time" min="0" max="24" placeholder="00">
                          <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                              <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                            </svg>
                          </div>
                        </div>
                      </div>
                      <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                        <label class="block uppercase tracking-wide text-gray-700 text-s font-bold mb-2"
                          for="party-people">
                          인원
                        </label>
                        <div class="relative">
                          <select
                            class="block appearance-none w-full  border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                            id="party-people">
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                          </select>
                          <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                              <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                            </svg>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="flex flex-wrap -mx-3 mb-6">
                      <div class="w-full px-3">
                        <label class="block uppercase tracking-wide text-gray-700 text-s font-bold mb-2"
                          for="party-place">
                          약속 장소
                        </label>
                        <input
                          class="appearance-none block w-full  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                          id="party-place" type="text">
                      </div>
                    </div>

                  </form>
                  <!--footer-->
                  <div class="flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b">
                    <button
                      class="bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                      type="submit" onclick="createParty()">
                      확인
                    </button>
                    <button
                      class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                      type="button" onclick="toggleModal('create-modal')">
                      취소
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="hidden opacity-25 fixed inset-0 z-40 bg-black" id="create-modal-backdrop"></div>
          </div>
          <!-- cards -->
          <div class="p-10 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-5">
            {% for party in partys %}
            <div class="mx-4 rounded overflow-hidden shadow-lg">
              <div class="flex justify-center ">
                {% if party.category == '한식' %}
                <img class="mx-2 my-2 object-cover h-48 w-96" src="../static/image/korean_food.png"
                  alt={{party.category}}>
                {% elif party.category == '양식' %}
                <img class="mx-2 my-2 object-cover h-48 w-96" src="../static/image/western_food.png"
                  alt={{party.category}}>
                {% elif party.category == '중식' %}
                <img class="mx-2 my-2 object-cover h-48 w-96" src="../static/image/chinese_food.png"
                  alt={{party.category}}>
                {% else %}
                <img class="mx-2 my-2 object-cover h-48 w-96" src="../static/image/japanese_food.png"
                  alt={{party.category}}>
                {% endif %}
              </div>
              <div class="px-6 py-4">
                <div class="font-bold text-xl mb-2 truncate ...">{{party.title}}</div>
                <ul class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-5">
                  <li class="flex justify-start">
                    <svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg> <a class="truncate ...">{{party.store}}</a>
                  </li>
                  <li class="flex justify-start"> <svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor"
                      viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
                      </path>
                    </svg> <a class="truncate ..."> {{party.category}} | {{party.menu}}</a> </li>
                  <li class="flex justify-start"> <svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor"
                      viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg> <a class="truncate ...">{{party.time}} </a> </li>
                  <li class="flex justify-start">
                    <svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4">
                      </path>
                    </svg>
                    <a class="truncate ...">{{party.place}}</a>
                  </li>
                </ul>
                <div class="flex justify-center pt-5">
                  <button onclick="joinParty('{{party._id}}')"
                    class="bg-blue-500 hover:bg-blue-700 text-white font-bold mt-4 pt-3 pb-2 px-4 rounded">
                    <div>
                      <span class="flex justify-start"> <svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor"
                          viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z">
                          </path>
                        </svg><a class="truncate ...">( {{party['participant']|length}} /
                          {{party.people}} )</a> </span>
                    </div>
                    참여하기
                  </button>
                </div>
              </div>
            </div>
            {% endfor %}
            <!-- cards -->
          </div>
    </main>
    <footer>
      <p class="text-center text-sm text-gray-500 my-10">
        &copy; 2022
        <a href="http://github.com/Krafton-Jungle-Team6/Jungle-Mini-Poject" class="hover:underline"
          target="_blank">Krafton Jungle Week00 Team06</a>. All rights reserved.
      </p>
    </footer>

  </div>
  </div>
  </div>
  </div>
  </div>
</body>

</html>